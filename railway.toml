[build]
builder = "nixpacks"
buildCommand = "npm install --production=false && npm run build"

[deploy]
startCommand = "npm run db:deploy && npm start"
healthcheckPath = "/api/healthcheck"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
numReplicas = 1

[deploy.websocket]
enabled = true
path = ["/ws", "/websocket"]
timeout = 300
keepAlive = true
maxConnections = 1000
idleTimeout = 60
proxyProtocol = true

